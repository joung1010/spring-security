## HTTP 기본 인증(Http Basic Authentication)
HTTP 기본 인증(Http Basic Authentication)은 가장 단순하고 널리 사용되는 인증 방법 중 하나로, HTTP 요청 헤더에 사용자 이름과 비밀번호를 포함하여 서버에 전송하는 방식입니다. 스프링 시큐리티(Spring Security)를 사용하여 HTTP 기본 인증을 설정하는 방법을 순차적으로 설명하겠습니다.  

### HTTP 기본 인증의 개념

HTTP 기본 인증은 클라이언트가 서버에 요청을 보낼 때 `Authorization` 헤더에 사용자 이름과 비밀번호를 Base64로 인코딩하여 포함시키는 방식입니다. 서버는 이 헤더를 디코딩하여 사용자 자격 증명을 검증합니다. 기본 인증의 흐름은 다음과 같습니다:

1. 클라이언트가 서버에 요청을 보냅니다.  
```arduino
Client ----(GET /protected-resource)----> Server
```
2. 서버가 인증이 필요한 리소스에 접근하려고 하면 `401 Unauthorized` 상태 코드와 함께 `WWW-Authenticate` 헤더를 보냅니다.  

```arduino
Server ----(401 Unauthorized, WWW-Authenticate: Basic realm="Access to the protected resource")----> Client

```
3. 클라이언트가 사용자 이름과 비밀번호를 Base64로 인코딩한 후 `Authorization` 헤더에 포함하여 다시 요청을 보냅니다.  
```arduino
username:password --> Base64 encoding --> dXNlcm5hbWU6cGFzc3dvcmQ=
Client ----(GET /protected-resource, Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=)----> Server

```
4. 서버가 헤더를 디코딩하여 자격 증명을 확인하고, 올바르면 요청을 처리합니다.  
```arduino
Server ----(200 OK, Protected Resource Content)----> Client

```

### HTTP 기본 인증의 보안 고려사항

HTTP 기본 인증은 단순하고 구현하기 쉬운 장점이 있지만, 몇 가지 보안상의 단점이 있습니다:

- 자격 증명이 평문으로 전송될 수 있어, 네트워크에서 쉽게 도청될 수 있습니다. (디코딩이 가능)
- 기본 인증은 클라이언트 측에서 자격 증명을 저장해야 하므로, 보안이 취약할 수 있습니다.

이러한 이유로, 기본 인증을 사용할 때는 반드시 HTTPS를 사용하여 데이터를 암호화하는 것이 권장됩니다.
  
### 기본 API
HttpBasicConfigurer 설정 클레스를 통해서 설정할 수 있다. 내부적으로 **`BasicAuthenticationFilter`** 가 생성되어 기본 인증 방식의 인증 처리를 담당하게 됩니다:  
```java 
 public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
            .authorizeHttpRequests(authz -> authz
                .anyRequest().authenticated()
            )
            .httpBasic(withDefaults());
        return http.build();
    }
```
```java

public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http
            .authorizeHttpRequests(authz -> authz
                    .anyRequest().authenticated()
            )
            .httpBasic(httpBasic -> {
                httpBasic
                        .realmName("My App") // 기본 인증 영역(Realm) 이름을 설정합니다.
                        .authenticationEntryPoint(customAuthEntryPoint()) // 사용자 정의 인증 진입점을 설정합니다.(인증 실패 시 호출되는 AuthenticationEndPoint 이다.)
                                                                         // 기본값은 Realm 영역으로 BasicAuthenticationEndPoint 가 사용된다.
                        .and()
                        .addFilterBefore(new CustomFilter(), UsernamePasswordAuthenticationFilter.class); // 사용자 정의 필터를 추가합니다.
            });
    return http.build();
}
```
기본 구현체: BasicAuthenticationEntryPoint    
```java
public class BasicAuthenticationEntryPoint implements AuthenticationEntryPoint, InitializingBean {
    private String realmName;

    public BasicAuthenticationEntryPoint() {
    }

    public void afterPropertiesSet() {
        Assert.hasText(this.realmName, "realmName must be specified");
    }

    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException {
        response.setHeader("WWW-Authenticate", "Basic realm=\"" + this.realmName + "\"");
        response.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());
    }

    public String getRealmName() {
        return this.realmName;
    }

    public void setRealmName(String realmName) {
        this.realmName = realmName;
    }
}
```